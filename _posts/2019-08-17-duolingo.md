---
title: "Extracting Duolingo vocabulary using Python"
excerpt: ""
tags:
- random
- language
- open source
- python
categories:
- random
- python
---

[Duolingo](https://www.duolingo.com/) is a popular and free language learning application, with millions of users, over 20 languages and counting. It has made language learning more flexible and accessible. I signed up for an account in 2014 and started learning French. There was a point when I was a serious language learner with over 9000 experience points (XPs). However, I gave up on French at some point and deleted my entire progress.

In March 2018, right before moving to Norway, I picked up Duolingo again. I was learning Norwegian (BokmÃ¥l) sporadically, as I was also attending a Norwegian language course after work. Duolingo has a [built-in feature to display learned words](https://www.duolingo.com/words), which I find very useful as I like to look at my vocabulary list from time to time. However, this is only available for a number of (popular) languages, like French and German. Another issue I had with this feature is that it does not display the translations within the learned words table. I used to keep a Google Spreadsheet to manage my vocabulary, but it was tedious to maintain. As I have decided recently to use Duolingo every day to practice my Norwegian, I was looking for other methods I can use to keep a vocabulary list, ideally something that can be automated.

I came across the [Unofficial Duolingo API by Kartik Talwar](https://github.com/KartikTalwar/Duolingo), an open-source Python package which can be used to extract data from your Duolingo account. I created a Python file called `login.py` to store my login information.

```py
myusername = 'my_duolingo_username'
mypassword = 'my_duolingo_password'
```

In a separate Python script, I imported this login information, which will be used to login to Duolingo via the unofficial API.

```py
# import libraries
import duolingo
import json
import pandas

# import login information saved in a separate file (login.py)
import login

# enter login information
lingo = duolingo.Duolingo(login.myusername, password=login.mypassword)
```

I then defined a list of the languages I am currently learning. I occasionally try out German and Irish Gaelic. (Also, the Latin course will be released next month. I cannot wait to give that a try!)

```py
# list of languages
lang = ['nb', 'de', 'ga'] 
# Norwegian (BokmÃ¥l), German, Irish Gaelic
```

I created a `for` loop to extract vocabulary information, which is in JSON format, from the [Duolingo vocabulary overview](https://www.duolingo.com/vocabulary/overview).

```py
# extracting data for each language in a loop
for l in lang:

    # extract vocabulary data from duolingo's 
    # vocabulary overview
    vocab = lingo.get_vocabulary(language_abbr=l)
```

I want my vocabulary in table form . So, I convert `vocab` into a Pandas dataframe and drop any duplicate entries.

```py
    # convert vocabulary overview to dataframe
    vocab_df = pandas.DataFrame(vocab['vocab_overview'])

    # drop duplicate words
    vocab_df = vocab_df.drop_duplicates('word_string')
```

To translate the words into English, we need to use [Duolingo's built-in dictionary](https://www.duolingo.com/dictionary). I ran into a problem where I could not automate the translation using the dictionary as there were too many words. To avoid this, I made a generator to split the list of words into manageable chunks.

```py
    # translating words into english
    # define a generator to split the list of words to
    # be translated to chunks
    # (to prevent 'Exception: Could not get
    # translations' caused by long lists)
    def splitlist(mylist, chunk_size):
        return [mylist[offs: offs+chunk_size] for offs in range(
            0, len(mylist), chunk_size)]

    # split the list of words into chunks with a
    # maximum length of 500
    word_list = splitlist(
        vocab_df['word_string'].tolist(), 500)
```

Since the translations are done in chunks, all translations have to be merged together. I created an empty dataframe, translated each chunk in a `for` loop and concatenated the results.

```py
    # create empty dataframe for merging
    vocab_merge = pandas.DataFrame()
    
    # translate each chunk and merge into the dataframe
    # in a loop
    for t in word_list:

        # get translations from duolingo's dictionary
        trnslt = lingo.get_translations(t, source='en', target=l)

        # convert translation dictionary to dataframe
        trnslt_df = pandas.DataFrame(dict([
            (k, pandas.Series(v)) for k, v in trnslt.items()])).transpose()

        # combine translation values into a single column
        trnslt_df = pandas.DataFrame(trnslt_df.apply(
            lambda x: x.str.cat(sep=', '), axis=1), columns=['translation'])

        # reset index and add keys to word_string column
        trnslt_df.index.names = ['word_string']
        trnslt_df.reset_index(level=0, inplace=True)

        # concatenate translated values from each loop
        # with the empty dataframe created
        vocab_merge = pandas.concat([vocab_merge, trnslt_df])
    
    # merge translated values with vocabulary overview
    vocab_df = vocab_df.merge(vocab_merge, on=['word_string'])
```

All the data we need have been extracted and merged nicely into a dataframe. However, there are a lot of unnecessary columns, such as the IDs of each word and the practice time in milliseconds. I dropped these columns, sorted the values by the associated skill, then the words themselves alphabetically. Finally, I saved the dataframe as a CSV file.

```py
    # drop unnecessary columns
    vocab_df = vocab_df.drop([
        'id', 'last_practiced_ms', 'lexeme_id', 'normalized_string',
        'related_lexemes', 'skill_url_title', 'strength'], axis=1)

    # sort values by skill, then by word_string
    vocab_df = vocab_df.sort_values(['skill', 'word_string'])

    # save vocabulary data as csv
    # use cp1252 encoding to print accented
    # latin characters
    vocab_df.to_csv("vocab_"+str(l)+".csv", encoding="cp1252", index=None)
```

I am really happy with the way the results turned out and I am sure this will be very useful for me. The CSV file containing my Norwegian vocabulary and all other files I used can be found in my [GitHub repository for this project](https://github.com/nmstreethran/duolingo). It is open-source and open for feedback or criticism. ðŸ˜„ You can follow my language learning progress [here](https://www.duolingo.com/nmstreethran).
