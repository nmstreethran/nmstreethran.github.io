---
title: "Extracting Duolingo vocabulary using Python"
excerpt: ""
tags:
- language
- open source
- python
- random
categories:
- open source
---

[![GitHub](https://img.shields.io/badge/-nmstreethran/duolingo-42B029?style=for-the-badge&logo=github&labelColor=black)](https://github.com/nmstreethran/duolingo)

[Duolingo](https://www.duolingo.com/) is a popular and free language learning application, with millions of users, over 20 languages and counting. It has made language learning more flexible and accessible. I signed up for an account in 2014 and started learning French. There was a point when I was a serious language learner with over 9000 experience points (XPs). However, I gave up on French at some point and deleted my entire progress.

In March 2018, right before moving to Norway, I picked up Duolingo again. I was learning Norwegian (Bokm친l) sporadically, as I was also attending a Norwegian language course after work. Duolingo has a [built-in feature to display learned words](https://www.duolingo.com/words), which I find very useful as I like to look at my vocabulary list from time to time. However, this is only available for a number of (popular) languages, like French and German. Another issue I had with this feature is that it does not display the translations within the learned words table. I used to keep a Google Spreadsheet to manage my vocabulary, but it was tedious to maintain. As I have decided recently to use Duolingo every day to practice my Norwegian, I was looking for other methods I can use to keep a vocabulary list, ideally something that can be automated.

I came across the [Unofficial Duolingo API by Kartik Talwar](https://github.com/KartikTalwar/Duolingo), an open-source Python package which can be used to extract data from your Duolingo account. I created a [Python script](https://github.com/nmstreethran/duolingo/blob/master/duolingo_data.py) which uses this API to produce CSV and PDF files of the vocabulary with English translations, extracted from Duolingo's dictionary and [vocabulary overview](https://www.duolingo.com/vocabulary/overview).

## Requirements

Python packages:
- [Unofficial Duolingo API by Kartik Talwar](https://github.com/KartikTalwar/Duolingo)
- [JSON](https://docs.python.org/3/library/json.html)
- [Pandas](https://pandas.pydata.org/)
- [os](https://docs.python.org/3/library/os.html)

A TeX distribution, such as [TeX Live 2019](http://tug.org/texlive/) is needed to produce PDFs. Compiling the PDF files using [vocab.tex](https://github.com/nmstreethran/duolingo/blob/master/vocab.tex) requires XeLaTeX and Makeglossaries. The compilation is done as follows:

```sh
xelatex vocab.tex
makeglossaries vocab
xelatex vocab.tex
```

## Running the script

```sh
python duolingo_data.py
```

You will be prompted to enter your Duolingo username and password in the terminal.

After running this script, CSV, JSON, TeX and PDF files containing the vocabulary will be saved in the same directory, using the naming convention `vocab_XX`. `XX` refers to the language code as defined by Duolingo. The codes in the table below are the ones I am aware of (mostly corresponding to [ISO 639](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)). When tested with the dictionary URL (`https://d2.duolingo.com/api/1/dictionary/hints/en/XX?token=hello`), the languages denoted `yes` produced an output. However, this script is not guaranteed to work for all languages that produced an output, especially ones with non-latin alphabets, as it has only been tested with German, Irish Gaelic, Scottish Gaelic, Latin and Norwegian (Bokm친l).

**Code** | **Language** | **Latin alphabet?** | **Does it produce an output?**
--- | --- | --- | ---
ar | Arabic | no | yes
cs | Czech | yes | yes
cy | Welsh | yes | yes
da | Danish | yes | yes
de | German | yes | yes
el | Greek | no | yes
eo | Esperanto | yes | yes
es | Spanish | yes | yes
fr | French | yes | yes
ga | Irish Gaelic | yes | yes
gd | Scottish Gaelic | yes | yes
he | Hebrew | no | yes
hi | Hindi | no | yes
hu | Hungarian | yes | yes
hv | High Valyrian | yes | yes
hw | Hawaiian | yes | yes
id | Indonesian | yes | yes
it | Italian | yes | yes
ja | Japanese | no | yes
ko | Korean | no | yes
la | Latin | yes | yes
nl | Dutch | yes | no
nb | Norwegian (Bokm친l) | yes | yes
nv | Navajo | yes | yes
pl | Polish | yes | yes
pt | Portuguese | yes | yes
ro | Romanian | yes | yes
ru | Russian | no | yes
sv | Swedish | yes | yes
sw | Swahili | yes | yes
tlh | Klingon | yes | no
tr | Turkish | yes | yes
uk | Ukrainian | no | yes
vi | Vietnamese | yes | yes
zh | Chinese | no | no

The list of languages are defined in a list as shown in the snippet below.

```py
# list of languages
language = [('nb', 'Norwegian (Bokm친l)'), ('de', 'German'),
    ('ga', 'Irish Gaelic'), ('gd', 'Scottish Gaelic'), ('la', 'Latin')]
```

I created a for loop to extract vocabulary information, which is in JSON format, from the Duolingo vocabulary overview. I want my vocabulary in table form. So, I convert vocab into a Pandas dataframe and drop any duplicate entries.

To translate the words into English, we need to use [Duolingo's built-in dictionary](https://www.duolingo.com/dictionary). I ran into a problem where I could not automate the translation using the dictionary as there were too many words. To avoid this, I made a generator to split the list of words into manageable chunks.

```py
    def splitlist(mylist, chunk_size):
        return [mylist[offs: offs+chunk_size] for offs in range(
            0, len(mylist), chunk_size)]

    word_list = splitlist(
        vocab_df['word_string'].tolist(), 500)
```

Since the translations are done in chunks, all translations have to be merged together. I created an empty dataframe, translated each chunk in a `for` loop and concatenated the results.

All the data we need have been extracted and merged nicely into a dataframe. However, there are a lot of unnecessary columns, such as the IDs of each word and the practice time in milliseconds. I dropped these columns, sorted the values by the associated skill, then the words themselves alphabetically.

I am really happy with the way the results turned out and I am sure this will be very useful for me. You can follow my language learning progress [here](https://www.duolingo.com/nmstreethran). Leave a comment below if you have any comments or feedback, or open an issue in the project's [GitHub repository](https://github.com/nmstreethran/duolingo)! 游땏
